@model Teeyoot.Module.ViewModels.CommonSettingsIndexViewModel
@{
    Layout.Title = T("Common Settings");
}

<table class="items" style="width: 70%;">
    <thead>
    <tr>
        <td>
            @T("Setting")
        </td>
        <td>
            @T("Value")
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            @T("Do not accept any new campaigns")
        </td>
        <td >
            @using (Html.BeginFormAntiForgeryPost(Url.Action("EditDoNotAcceptAnyNewCampaigns", "AdminCommonSettings")))
            {
                @Html.CheckBoxFor(model => model.DoNotAcceptAnyNewCampaigns, new {id = "do_not_accept_any_new_campaigns"})
            }
        </td>
    </tr>
    <tr>
        <td>
            @T("Number of colours per print")
        </td>
        <td>
            @using (Html.BeginFormAntiForgeryPost(Url.Action("EditColoursPerPrint", "AdminCommonSettings"), FormMethod.Post, new {id = "edit_colours_per_print_form"}))
            {
                @Html.TextBoxFor(model => model.ColoursPerPrint, new {id = "colours_per_print", @class = "text"})
                <button type="submit">@T("Edit")</button>
            }
        </td>
    </tr>
    </tbody>
</table>

@using (Script.Foot())
{
    <script>
        function isInt(value) {
            return !isNaN(value) &&
                parseInt(Number(value)) == value &&
                !isNaN(parseInt(value, 10));
        }

        $(document).ready(function() {
            $('#do_not_accept_any_new_campaigns').change(function() {
                $(this).closest('form').submit();
            });

            $('#edit_colours_per_print_form').submit(function() {
                var coloursPerPrintValue = $('#colours_per_print').val();
                if (!isInt(coloursPerPrintValue)) {
                    alert('@T("Please provide integer number")');
                    return false;
                }
                return true;
            });
        });
    </script>
}