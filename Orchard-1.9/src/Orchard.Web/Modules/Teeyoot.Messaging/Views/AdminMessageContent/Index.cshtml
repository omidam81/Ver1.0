@model  IEnumerable<Teeyoot.Module.Models.MessageRecord>

@{
    Style.Include("AdminPayout.css");
    //Style.Include("bootstrap.min.css");
}

@using (Script.Foot())
{
    
    
    
    
    <script type="text/javascript">




        @*function getRes(request, response) {
            var result = new Array();
            $.ajax({
                async: false,
                cache: false,
                type: "GET",
                url: "@(Url.Action("GetPayoutInfirmation", "Tranzaction"))",
                data: { "userId": document.getElementById("inputTags").value },
            success: function (data) {
                for (var i = 0; i < data.length ; i++) {
                    result[i] = data[i];
                }
            },
                    });
        response(result);

        };*@



        $(document).ready(function () {
            $('.go').click(function (event) {
                event.preventDefault();
                /* Запрос на сервак */

                var inf = this.value.split(',');
                 function getes(request, response) {
                    var result = new Array();
                    $.ajax({
                        async: false,
                        cache: false,
                        type: "GET",
                        url: "@(Url.Action("GetPayoutInfirmation", "Tranzaction"))",
                        data: { "userId": inf[0], "tranzId": inf[1] },
                        success: function (data) {
                            $("#userName").html(data.userName);
                            $("#email").html(data.email);
                            $("#accNumber").html(data.accountNumber);
                            $("#bankName").html(data.bankName);
                            $("#contNumber").html(data.contactNumber);
                            $("#mesAdmin").html(data.mesAdmin);
                            $("#accHoldName").html(data.accountHolderName);
                    }, error: function (data, status, resp) {
                        alert('Status: ' + data.status + '. Error message: ' + data.statusText);
                    }});
            };


                /* End Запрос на сервак */
                console.log(getes())
                $('#overlay').fadeIn(400,
                    function () {
                        $('#modal_form')
                            .css('display', 'block')
                            .animate({ opacity: 1, top: '50%' }, 200);
                    });
            });
            /* Зaкрытие мoдaльнoгo oкнa, тут делaем тo же сaмoе нo в oбрaтнoм пoрядке */
            $('#modal_close, #overlay').click(function () {
                $('#modal_form')
                    .animate({ opacity: 0, top: '45%' }, 200,
                        function () { // пoсле aнимaции
                            $(this).css('display', 'none');
                            $('#overlay').fadeOut(400);
                        }
                    );
            });
        });



        </script>
    }




@{
    <fieldset>
        <table class="items">
            <thead>
                <tr class="admin-categories">
                    <th class="date">
                        <h3>DATE</h3>
                    </th>
                    <th class="event">
                        <h3>EVENT</h3>
                    </th>
                    <th class="amount">
                        <h3>AMOUNT</h3>
                    </th>
                    <th class="status">
                        <h3>STATUS</h3>
                    </th>
                    <th class="userId">
                        <h3>USERID</h3>
                    </th>
                    <th class="inf">
                        <h3></h3>
                    </th>
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="admin-categories-tr">
                        <td class="date">
                            @item.SendDate
                        </td>
                        <td class="event">
                            @item.Sender
                        </td>                       
                        <td class="status">
                            @item.Text
                        </td>
                        <td class="userId">
                            @item.UserId
                        </td>
                        <td class="inf">
                            <button class="go" type="submit" value="@item.UserId,@item.Id">@T("inf")
                            </button>
                        </td>
                    </tr>


                }
            </tbody>
        </table>

    </fieldset>
   // @Display(Model.Pager)

}



<fieldset>
    <div id="modal_form" style="">
        @Html.Partial("PaymentUserInformation")
    </div>
    <div id="overlay"></div> 
</fieldset>